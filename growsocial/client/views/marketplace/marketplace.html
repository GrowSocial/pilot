<template name="marketplace">
    <div id="#marketContainer" class="container">
        <h1>Marketplace <small><span class="label label-default">Phase 1 will include filters, searching, and perhaps some real products</span></small></h1>
        <span class="label label-default">You can add marketplace items in your profile page.</span>
        <button type="button" id="addSampleProductsButton" class="btn btn-default" >Add sample products</button>
        <button type="button" id="removeSampleProductsButton" class="btn btn-default" >Remove all sample products</button>
        <div id="marketNotifyDiv"></div>
<!-- 
        {{#if selectedProduct}}
            <p>Selected productId: {{selectedProduct}}</p>
        {{/if}}
 -->
        <ul>
        {{#each vendorList}}
            <li>
                <p>Vendor: {{vendorName}}</p>
                <ul>
                {{#each items}}
                    {{> marketplaceItem}}
                    <div class="popoverContent hide">
                        {{> addQtyToCart}}
                    </div>
                {{/each}}
                </ul>
            </li>
        {{/each}}
        </ul>
    </div>
</template>

<template name="marketplaceItem">
    <li>
        <img class="marketplace-product-img" src="{{#if photo.src}}{{photo.src}}{{else}}{{randomPhotoSrc}}{{/if}}" alt="{{name}} product photo">
        <ul>
            {{#if currentUser}}
                <button class="popoverThis btn btn-large btn-danger" data-toggle="popover">Buy</button>
            {{else}}
                <span class="label label-default">Login to buy items.</span>
            {{/if}}
            <li>Name: {{name}}</li>
            <li>Description: {{description}}</li>
            <li>Unit Price: {{unitPrice}} {{currency}} ({{unitType}})</li>
            <li><a href="{{../vendorLink}}">Sold by: {{../vendorName}}</a></li>
        </ul>
    </li>
</template>
