
<template name="search">

    <div id="#searchContainer" class="container">
        <button type="button" id="addSamplePeopleButton" class="btn btn-default" >Add sample people</button>
        <button type="button" id="removeSamplePeopleButton" class="btn btn-default" >Remove all sample people</button>
        <button type="button" id="setMapLocationButton" class="btn btn-default" >View map at my location</button>
        <div id="searchNotifyDiv"></div>
        
        {{> EasySearch.Input index=peopleIndex timeout=500 attributes=inputAttributes}}

        {{> searchFilters}}
        
        <hr/>
        {{#EasySearch.IfInputEmpty index=peopleIndex}}
            <div class="no-results">Enter a search word</div>
        {{else}}
            {{#EasySearch.IfSearching index=peopleIndex }}
                <div>Searching ...</div>
            {{else}}
                <div class="padded count-results">{{resultsCount}} results found.</div>
                {{#if resultsCount}}
                    <!-- TODO multiple indexes, to search products and people, conditionally on filters/context -->
                    <!-- TODO pagination, more results than limit, etc. -->
                    <ul>
                        {{#EasySearch.Each index=peopleIndex }}
                            <li>Name: {{fullname}}, Town: {{town}}</li>
                        {{/EasySearch.Each}}
                    </ul>
                {{/if}}
            {{/EasySearch.IfSearching }}
        {{/EasySearch.IfInputEmpty}}
        <hr/>
        <!-- {{> awesomeAutosuggest}} -->
        {{> searchMap}}
    </div>
</template>

<template name="searchFilters">
    <p>Filters:</p>
    <select class="category-filter disabled" disabled>
        <option value="">All</option>
        <option value="People" selected>People</option>
        <option value="Products">Products</option>
        <option value="Events">Events</option>
    </select>

    <select class="town-filter">
        <option value="">(Any town)</option>
        <option value="Davie">Davie</option>
        <option value="Fort Lauderdale">Fort Lauderdale</option>
        <option value="Tampa">Tampa</option>
    </select>

    <select class="range-filter">
        <option value="">(Any range)</option>
        <option value="500">500m</option>
        <option value="1000">1km</option>
        <option value="2000" selected>2km</option>
        <option value="5000">5km</option>
    </select>
</template>

<!-- <template name="awesomeAutosuggest"> -->
<!-- Meteor package: easysearch:autosuggest -->
    <!-- searchIndex typeof EasySearch.Index -->
    <!-- {{> EasySearch.Autosuggest index=peopleIndex }} -->
    <!-- bug?  repeats the suggest values to about four times each ??? is there a default create config? -->
    <!-- bug? timeout not working for auto suggest? think it is configured differently to search -->
<!-- </template> -->

<template name="searchMap">
    <div class="row">
        <div id='map' class="searchMap-container col-md-6 col-xs-12"></div>
    </div>
</template>
